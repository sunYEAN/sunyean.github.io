<!DOCTYPE html><html lang="en"><head>  <meta name="generator" content="Hexo 3.8.0">  <meta charset="UTF-8">  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">  <meta http-equiv="Cache-Control" content="no-transform">  <meta http-equiv="Cache-Control" content="no-siteapp">  <meta name="keywords" content="Y-HEAN">  <meta name="description" content="无所谓有，无所谓无">  <meta property="og:type" content="website">  <meta property="og:title" content="Y-HEAN">  <meta property="og:url" content="http://sunyean.github.io/yean-blog/index.html">  <meta property="og:site_name" content="Y-HEAN">  <meta property="og:description" content="无所谓有，无所谓无">  <meta property="og:locale" content="zh-Hans">  <meta name="twitter:card" content="summary">  <meta name="twitter:title" content="Y-HEAN">  <meta name="twitter:description" content="无所谓有，无所谓无">  <title> Y-HEAN </title>  <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico?v=5.0.1">  <link rel="stylesheet" href="./main.css">  <style>    #ball {      border-radius: 50%;      position: absolute;      box-shadow: 0 0 10px 2px rgba(255, 107, 0, 0.4), 0 0 22px 11px rgba(255, 203, 0, 0.13);    }    #animateBall {      border-radius: 50%;      position: absolute;    }    h1 {      font-size: 15px;      color: #fff;      position: absolute;      left: 50%;      transform: translate(-50%, -50%);      z-index: 1000;      top: 80%;      white-space: normal;    }    h1 a {      cursor: pointer;      display: inline-block;      transform-origin: center center;      /*text-decoration: underline;*/    }    h1 .to_black:focus {      -webkit-animation: toBlack 0.3s linear;      -o-animation: toBlack 0.3s linear;      animation: toBlack 0.3s linear;    }    .input_wrapper {      position: fixed;      right: 0;      top: 20px;      background-color: rgba(216, 216, 216, 0.2);      padding: 10px;      font-size: 12px;      border-top-left-radius: 4px;      border-bottom-left-radius: 4px;      -webkit-transition: transform 0.3s ease-in-out;      -moz-transition: transform 0.3s ease-in-out;      -ms-transition: transform 0.3s ease-in-out;      -o-transition: transform 0.3s ease-in-out;      transition: transform 0.3s ease-in-out;    }    .hide {      transform: translateX(100%);    }    .input_wrapper label {      display: block;      width: 100%;      margin-top: 8px;    }    .input_wrapper label input {      width: 130px;      padding: 4px;      border-radius: 2px;      border: none;      font-size: 12px;      color: #222;    }    .input_wrapper button {      width: 100px;      padding: 4px;      border-radius: 2px;      border: none;      background-color: #333;      outline: none;      font-size: 12px;      color: white;      cursor: pointer;      display: block;      margin: 20px auto 0;    }    .input_wrapper button:hover {      background-color: #222;    }    #type-two {      height: 100%;      width: 100%;      background-color: #223;      transform-style: preserve-3d;      perspective: 1000px;      -moz-perspective: 1000px;      -webkit-perspective: 1000px;    }    #ball > .ball, #animateBall > .ball {      width: 100%;      height: 100%;    }    #ball > .ball > .circle {      border-color: #f9b700;    }    #animateBall > .ball > .circle {      border-color: #1483ff;    }    #one {      display: block;    }    #two {      display: none;    }  </style></head><body><main class="main_wrapper" data-show="one">  <div id="one" class="solar-syst">    <div class="sun">      <div class="circle circle-1"></div>      <div class="circle circle-2"></div>      <div class="circle circle-3"></div>      <div class="circle circle-4"></div>      <div class="circle circle-5"></div>      <div class="circle circle-6"></div>      <div class="circle circle-7"></div>    </div>    <div class="mercury">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="venus">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="earth">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="mars">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="jupiter">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="saturn">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="uranus">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="neptune">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="pluto">      <div class="ball">        <div class="circle circle-1"></div>        <div class="circle circle-2"></div>        <div class="circle circle-3"></div>        <div class="circle circle-4"></div>        <div class="circle circle-5"></div>        <div class="circle circle-6"></div>        <div class="circle circle-7"></div>      </div>    </div>    <div class="asteroids-belt">    </div>  </div>  <h1><a id="toggle">切换</a> 点击进入 <a class="to_black" href="https://sunyean.github.io/yean-blog">blog</a></h1>  <div id="type-two"></div>  <!--<div class="ball" id="ball"></div>-->  <!--<div class="animate-ball" id="animateBall"></div>-->  <div id="two" class="input_wrapper">    <form id="form" class="input_list">      恒星：      <label>        <input name="s_m" type="text" placeholder="恒星质量: 50000">      </label>      <label>        <input name="s_r" type="text" placeholder="恒星半径: 30">      </label>      <label>        <input name="s_x" type="text" placeholder="恒星起始位置-x: 中心">      </label>      <label>        <input name="s_y" type="text" placeholder="恒星起始位置-y: 中心">      </label>      行星：      <label>        <input name="a_m" type="text" placeholder="行星质量: 100">      </label>      <label>        <input name="a_r" type="text" placeholder="行星半径: 10">      </label>      <label>        <input name="a_vx" type="text" placeholder="行星速度-x: 20">      </label>      <label>        <input name="a_vy" type="text" placeholder="行星速度-y: 0">      </label>      <label>        <input name="a_x" type="text" placeholder="行星起始位置-x: 中心">      </label>      <label>        <input name="a_y" type="text" placeholder="行星起始位置-x: 100">      </label>    </form>    <button id="btn" data-state="pause">开始</button>  </div></main><script>	/**	 * 计算加速度和两球距离的方法集合	 * @type {{get_wan(*, *): *, get_wan_a(*=, *=): *}}	 */	const UTIL = {		get_wan(b1, b2) {			const ball1 = b1.el;			const ball2 = b2.el;			const d_x = ball2.offsetLeft - ball1.offsetLeft - b1.options.r + b2.options.r;			const d_y = ball2.offsetTop - ball1.offsetTop - b1.options.r + b2.options.r;			const dis = Math.round( 100000 * Math.sqrt( d_x * d_x + d_y * d_y ) ) / 100000;			const angle = Math.abs( Math.atan( d_y / d_x ) * ( 180 / Math.PI ) );			return {				d_x,				d_y,				dis,				angle			};		},		get_wan_a(b1, b2) {			const {d_x, d_y, dis, angle} = this.get_wan( b1, b2 );			const a = Math.round( 100000 * G * b2.options.m / Math.pow( dis, 2 ) ) / 100000;			let ax = Math.round( 100000 * Math.cos( angle * Math.PI / 180 ) * a ) / 100000;			let ay = Math.round( 100000 * Math.sin( angle * Math.PI / 180 ) * a ) / 100000;			let xx = 1;			if ( d_x >= 0 ) {				if ( d_y < 0 ) {					xx = 2;					ay = -ay;				}			} else {				if ( d_y >= 0 ) {					xx = 4;					ax = -ax;				}				else {					xx = 3;					ax = -ax;					ay = -ay;				}			}			return {				xx,				a,				ax,				ay			};		}	};	/**	 * 常量	 * @type {number}	 */	const G = 9.8;	/**	 * 时间刻度	 * @type {number}	 */	const TimeLine = 100;	/**	 * 球体类	 * @param el	 * @param options	 * @returns {Ball}	 * @constructor	 */	function Ball(el, options) {		if ( this instanceof Ball ) {			this.options = Object.assign( {				m: 1000, // 质量 单位:KG				vx: 0, // X 方向初速度				vy: 0, // Y 方向初速度				r: 100 // 球体半径			}, options );			this.el = el;			this.time = Date.now();			this.timer = null;			this.count = 1;			this.init();		} else {			return new Ball( el, options );		}	}	Ball.prototype = {		init() {			const {vx, vy, r, x, y} = this.options;			this.el.style.cssText = `width: ${r * 2}px;height: ${r * 2}px;left:${x - r}px;top:${y - r}px`;			if ( !vx && !vy ) return;			setTimeout( this.animate(), 0 );		},		animate() {			const _this = this;			let t_level = Date.now();			cancelAnimationFrame( _this.timer );			if ( !_this.options.M || !_this.options.M.length ) {				// 匀速直线运动				function ani() {					const {vx, vy} = _this.options;					const time = ( Date.now() - _this.time ) / 3600;					const n_x = Math.round( vx * time * 100 ) / 100;					const n_y = Math.round( vy * time * 100 ) / 100;					_this.el.style.transform = `translate(${n_x}px, ${n_y}px)`;					if ( n_x > window.innerWidth || n_y > window.innerHeight ) {						cancelAnimationFrame( _this.timer );						return;					}					_this.timer = window.requestAnimationFrame( ani );				}				ani();			} else {				// 变速运动				function wan_animate() {					const {vx, vy} = _this.options;					const {ax, ay, xx} = UTIL.get_wan_a( _this, _this.options.M[0] );					const now = Date.now();					const t = Math.floor( 100000 * ( now - t_level ) / TimeLine ) / 100000;					const vx_a = Math.floor( 100000 * ( 2 * vx + ax * t ) / 2 ) / 100000;					const vy_a = Math.floor( 100000 * ( 2 * vy + ay * t ) / 2 ) / 100000;					t_level = now;					_this.options.vx = vx_a;					_this.options.vy = vy_a;					const s_x = _this.el.offsetLeft + vx_a * t;					const s_y = _this.el.offsetTop + vy_a * t;					// 计算当前时间的el应该在什么位置					_this.el.style.left = s_x + 'px';					_this.el.style.top = s_y + 'px';					// if (_this.count < 1000) {					// 	console.log(t);					// 	_this.count++;					// }					// if ( Math.abs( s_x ) >= window.innerWidth || Math.abs( s_y ) > window.innerHeight ) {					// 	cancelAnimationFrame( _this.timer );					// 	return;					// }					_this.timer = window.requestAnimationFrame( wan_animate );				}				wan_animate();			}		},		pause() {			cancelAnimationFrame( this.timer );		}	};	/**	 * 存dom 后面会用到	 * @type {{typeTwo: HTMLElement | null, one: HTMLElement | null, two: HTMLElement | null, body: Node, main_wrapper: Element}}	 */	const dom = {		typeTwo: document.getElementById( 'type-two' ),		one: document.getElementById( 'one' ),		two: document.getElementById( 'two' ),		body: document.getElementsByTagName( 'body' )[0],		main_wrapper: document.getElementsByClassName( 'main_wrapper' )[0]	};	const dom_3d = '<div class="ball">\n' +		'      <div class="circle circle-1"></div>\n' +		'      <div class="circle circle-2"></div>\n' +		'      <div class="circle circle-3"></div>\n' +		'      <div class="circle circle-4"></div>\n' +		'      <div class="circle circle-5"></div>\n' +		'      <div class="circle circle-6"></div>\n' +		'      <div class="circle circle-7"></div>\n' +		'      </div>';	// 创建小球	function createDom(id, options) {		const div = document.createElement( 'div' );		let style = '';		div.id = id;		if ( options && options.style ) {			if ( options.style.toString() === '[object Object]' ) {				for ( var i in options.style ) {					style += i + ':' + options.style[i] + ';';				}			}			div.style.cssText = style;		}		div.innerHTML = dom_3d;		dom.typeTwo.appendChild( div );	}	// 初始化每个球	function initSolar() {		const ball = document.getElementById( 'ball' );		const an = document.getElementById( 'animateBall' );		ball && dom.typeTwo.removeChild( ball );		an && dom.typeTwo.removeChild( an );		with ( form ) {			createDom( 'ball' );			createDom( 'animateBall' );			const m_options = {				m: +s_m.value || 50000,				vx: 0,				vy: 0,				r: +s_r.value || 30,				x: +s_x.value || window.innerWidth / 2,				y: +s_y.value || window.innerHeight / 2			};			var Main = new Ball( document.getElementById( 'ball' ), m_options );			const a_options = {				m: +a_m.value || 100,				vx: +a_vx.value || 20,				vy: +a_vy.value || 0,				r: +a_r.value || 10,				x: +a_x.value || window.innerWidth / 2,				y: +a_y.value || 100,				M: [Main]			};			var animate = new Ball( document.getElementById( 'animateBall' ), a_options );		}		;	}	btn.addEventListener( 'click', function (e) {		e.stopPropagation();		initSolar();		dom.two.classList.add( 'hide' );	} );	toggle.addEventListener( 'click', function (e) {		e.stopPropagation();		const elArr = [dom.one, dom.two];		const type = dom.main_wrapper.dataset.show;		const el = {			one: 0,			two: 1		};		elArr[Number( el[type] )].style.display = 'none';		elArr[Number( !el[type] )].style.display = 'block';		dom.main_wrapper.setAttribute( 'data-show', type === 'one' ? 'two' : 'one' );		if ( type === 'two' ) {			const ball = document.getElementById( 'ball' );			const an = document.getElementById( 'animateBall' );			ball && dom.typeTwo.removeChild( ball );			an && dom.typeTwo.removeChild( an );		} else {			if ( dom.two.classList.contains( 'hide' ) ) dom.two.classList.remove( 'hide' );		}	} );	dom.main_wrapper.addEventListener( 'click', function (e) {		if (this.dataset.show === 'one') return;		if ( dom.two.classList.contains( 'hide' ) ) dom.two.classList.remove( 'hide' );		else dom.two.classList.add( 'hide' );	} );	two.addEventListener( 'click', function (e) {		e.stopPropagation();	} );	function IsPC() {		var userAgentInfo = navigator.userAgent;		var Agents = new Array( 'Android', 'iPhone', 'SymbianOS', 'Windows Phone', 'iPad', 'iPod' );		var flag = true;		for ( var v = 0; v < Agents.length; v++ ) {			if ( userAgentInfo.indexOf( Agents[v] ) > 0 ) {				flag = false;				break;			}		}		return flag;	}	const isPc = IsPC();	if ( isPc ) {		var start = 'mouseover';		var move = 'mousemove';		var end = 'mouseout';	} else {		var start = 'touchstart';		var move = 'touchmove';		var end = 'touchend';	}	var touch = {		startX: 0,		startY: 0,		offsetX: 0,		offsetY: 0,		cOffsetX: 0,		cOffsetY: 0,		disX: 0,		disY: 0,    start: false,	};	dom.main_wrapper.addEventListener( start, function (e) {		if (this.dataset.show === 'one') return;		touch.start = true;		if ( isPc ) {			touch.startX = e.pageX;			touch.startY = e.pageY;		} else {			touch.startX = e.touches[0].pageX;			touch.startY = e.touches[0].pageY;		}	} );	dom.main_wrapper.addEventListener( move, function (e) {		if (this.dataset.show === 'one') return;		if (!touch.start) return;		if ( isPc ) {			touch.disX = e.pageX - touch.startX;			touch.disY = e.pageY - touch.startY;		} else {			touch.disX = e.touches[0].pageX - touch.startX;			touch.disY = e.touches[0].pageY - touch.startY;		}		touch.offsetX = touch.disX * 2 + touch.cOffsetX;		touch.offsetY = touch.disY * 2 + touch.cOffsetY;		const rateX = Math.round( touch.offsetX * 100 / window.innerWidth) / 100;		const rateY = Math.round( touch.offsetY * 100 / window.innerHeight) / 100;		document.getElementById( 'type-two' ).style.transform = 'rotateX('+ (rateY * 180 / 4) % 360 +'deg) rotateY('+ (rateX * 180 / 4) % 360 +'deg)';	} );	dom.main_wrapper.addEventListener( end, function (e) {		if (this.dataset.show === 'one') return;		touch.start = false;		touch.cOffsetX = touch.offsetX;		touch.cOffsetY = touch.offsetY;		touch.disX = 0;		touch.disY = 0;	} );</script></body></html>